<script>
  var checkItemInterval;

  function addCheckItemInterval(){
    // Check every 10 seconds
    checkItemInterval = setInterval( checkItem, 1000 );
  }

  function removeCheckItemInterval(){
    clearInterval( checkItemInterval );
  }

  function checkItem(){
    google.script.run
      .withSuccessHandler( function( isDeleted ){
        if( isDeleted ){
          removeCheckItemInterval();
          google.script.run.showSidebar();
        }
      })
      .checkEventDeletion();

    google.script.run
      .checkFormItemValue();
  }

  /**
   * Run initializations on sidebar load.
   */
  (function() {
    addCheckItemInterval();
  })();

</script>
